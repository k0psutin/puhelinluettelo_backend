(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(17),s=n.n(r),c=n(3),a=n(2),u=n(0),o=function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:e.nameFilter,onChange:function(t){return e.setNameFilter(t.target.value)}})]})})},i=n(5),l=n.n(i),d="/api/persons",j=function(e){return e.then((function(e){return e.data}))},b=function(){return j(l.a.get(d))},f=function(e){return j(l.a.post(d,e))},h=function(e,t){return j(l.a.put("".concat(d,"/").concat(e),t))},m=function(e){return j(l.a.delete("".concat(d,"/").concat(e)))},O=function(e){var t=e.persons,n=e.setPersons,r=e.setErrorMessage,s=Object(a.useState)(""),o=Object(c.a)(s,2),i=o[0],l=o[1],d=Object(a.useState)(""),j=Object(c.a)(d,2),b=j[0],m=j[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Add a new number"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=t.find((function(e){return e.name.toLowerCase()===i.toLowerCase()})),c=i.trim().length>5,a=b.length>5;if(!c||!a)return r(c?"Number should be at least 6 digits long.":"Name should be at least 6 chars long.","error"),null;var u=!1;if(s&&!(u=window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))))return null;var o={name:i,number:b};u?h(s.id,o).then((function(e){n(t.map((function(t){return t.id!==s.id?t:e}))),l(""),m(""),r("".concat(i," updated successfully!"),"done")})):f(o).then((function(e){n(t.concat(e)),l(""),m(""),r("".concat(i," added successfully!"),"done")}))},children:[Object(u.jsxs)("div",{children:["name",Object(u.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number",Object(u.jsx)("input",{value:b,onChange:function(e){return m(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},p=n(8),v=(n(41),function(e){var t=e.persons,n=e.filteredList,r=e.setPersons,s=e.setErrorMessage;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{className:"person",children:[e.name," ",e.number," ",Object(u.jsx)("button",{onClick:function(){return n=e.name,c=e.id,void(window.confirm("Delete ".concat(n,"?"))&&m(c).then((function(){var e=t.filter((function(e){return e.id!==c}));r(Object(p.a)(e)),s("".concat(n," successfully removed."),"done")})).catch((function(){s("".concat(n," has already been removed from the server."),"error");var e=t.filter((function(e){return e.id!==c}));r(Object(p.a)(e))})));var n,c},children:"delete"})]},e.id)}))})]})}),g=function(e){var t=e.message,n=e.className;return null===t?null:Object(u.jsx)("div",{className:n,children:t})},x=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),i=Object(c.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)({message:null,type:null}),f=Object(c.a)(j,2),h=f[0],m=f[1],p=function(e,t){m({message:e,type:t}),setTimeout((function(){return m({message:null,type:null})}),5e3)};Object(a.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var x=n.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(g,{message:h.message,className:h.type}),Object(u.jsx)(o,{nameFilter:l,setNameFilter:d}),Object(u.jsx)(O,{setErrorMessage:p,persons:n,setPersons:r}),Object(u.jsx)(v,{setErrorMessage:p,persons:n,setPersons:r,filteredList:x})]})};s.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.201835fb.chunk.js.map